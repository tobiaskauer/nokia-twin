(function(t){function e(e){for(var i,a,c=e[0],o=e[1],l=e[2],d=0,f=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,c=1;c<n.length;c++){var o=n[c];0!==s[o]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/nokiatwin/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),s=n.n(i);s.a},"05ab":function(t,e,n){"use strict";var i=n("bd08"),s=n.n(i);s.a},"0634":function(t,e,n){"use strict";var i=n("b566"),s=n.n(i);s.a},"1d94":function(t,e,n){"use strict";var i=n("e1a6"),s=n.n(i);s.a},"2c95":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid h-100"},[n("div",{staticClass:"row justify-content-center h-100"},[n("sidebar"),n("vis")],1)])},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-4 sidebar hidden-md-down"},[n("h1",[t._v("Twin DB")]),n("metrics",{ref:"metrics"}),n("ul",t._l(t.lines,(function(t,e){return n("filterRow",{key:e,ref:"filterRow-"+t.identifier,refInFor:!0,attrs:{line:t}})})),1),n("div",{staticClass:"addLine"},[n("button",{on:{click:t.addLine}},[t._v("Add Line")])])],1)},c=[],o=(n("7db0"),n("4160"),n("ac1f"),n("1276"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"filterRow",style:"border-color: "+this.line.color},[n("ul",{staticClass:"controls"},[n("li",{class:{rotate:!t.collapsed}},[n("a",{on:{click:function(e){return t.collapse(t.collapsed)}}},[n("svg",{staticClass:"bi bi-arrow-down-circle-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:this.line.color,xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 5a.5.5 0 0 0-1 0v4.793L5.354 7.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 9.793V5z"}})])])]),n("li",{staticClass:"delete"},[n("a",{on:{click:function(e){return t.removeLine(t.line.identifier)}}},[n("svg",{staticClass:"bi bi-x-circle-fill",attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16",fill:this.line.color,xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.146-3.146a.5.5 0 0 0-.708-.708L8 7.293 4.854 4.146a.5.5 0 1 0-.708.708L7.293 8l-3.147 3.146a.5.5 0 0 0 .708.708L8 8.707l3.146 3.147a.5.5 0 0 0 .708-.708L8.707 8l3.147-3.146z"}})])])])]),n("div",{staticClass:"collapsed",class:{hidden:!t.collapsed}},[t.collapsedItems.length>0?n("div",[n("ul",{staticClass:"items"},t._l(t.collapsedItems,(function(e,i){return n("li",{key:"selected-"+i},[e.selected?n("div",{style:{"font-color":"bold",background:t.line.color}},[t._v(t._s(e.selected))]):t._e()])})),0)]):n("div",[t._v(" No filters selected ")])]),t._l(t.filterColumns,(function(e,i){return n("div",{key:"list-"+i,ref:e.display,refInFor:!0,staticClass:"expanded",class:{hidden:t.collapsed}},[n("strong",[t._v(t._s(e.display))]),n("ul",{staticClass:"items"},t._l(e.elements,(function(i){return n("li",{key:i.key},[n("div",{style:[t.selected.find((function(t){return t.display==e.display})).selected==i.key?{"font-weight":"bold",background:t.line.color}:{background:"none"}],on:{click:function(n){return t.select(e.display,i)}}},[t._v(" "+t._s(i.key)+" "),t.selected.find((function(t){return t.display==e.display})).selected==i.key?n("svg",{attrs:{width:"1em",height:"1em",viewBox:"0 0 16 16"}},[n("path",{attrs:{transform:"scale(.04)",fill:"white",d:"M247.244,169.59l83.938-83.938c5.332-5.327,7.994-11.798,7.994-19.414c0-7.614-2.669-14.084-7.994-19.414L292.355,7.993C287.026,2.665,280.556,0,272.944,0c-7.617,0-14.085,2.665-19.417,7.993L169.59,91.931L85.651,7.993C80.325,2.665,73.854,0,66.237,0c-7.611,0-14.083,2.665-19.414,7.993L7.994,46.824C2.667,52.15,0,58.624,0,66.238c0,7.616,2.664,14.084,7.994,19.414l83.937,83.938L7.994,253.528C2.667,258.859,0,265.327,0,272.945c0,7.61,2.664,14.082,7.994,19.41l38.83,38.828c5.33,5.332,11.803,7.994,19.414,7.994c7.616,0,14.084-2.669,19.414-7.994l83.939-83.938l83.944,83.938c5.328,5.332,11.793,7.994,19.417,7.994c7.611,0,14.082-2.669,19.411-7.994l38.82-38.828c5.332-5.324,7.994-11.8,7.994-19.41c0-7.618-2.662-14.086-7.994-19.417L247.244,169.59z"}})]):t._e()])])})),0),e.autocomplete.length>5?n("div",{staticClass:"typeahead"},[n("vue-bootstrap-typeahead",{attrs:{data:e.autocomplete,size:"sm",serializer:function(t){return t.key},placeholder:"Add "+e.display},on:{hit:function(n){return t.addFilter(e,n)}},model:{value:t.selected.find((function(t){return t.display==e.display})).selected,callback:function(n){t.$set(t.selected.find((function(t){return t.display==e.display})),"selected",n)},expression:"selected.find(x=>x.display == col.display).selected"}})],1):t._e()])}))],2)}),l=[],u=(n("4de4"),n("d81d"),n("d45f")),d={components:{VueBootstrapTypeahead:u["a"]},data:function(){return{collapsed:!1}},computed:{filterColumns:{cache:!0,get:function(){return this.$store.getters.getFilterColumns}},selected:{cache:!1,get:function(){var t=this,e=this.filterColumns.map((function(e){var n="";return e.filters.forEach((function(e){t.line.query[e]&&(n=t.line.query[e])})),{display:e.display,selected:n}}));return e}},collapsedItems:{cache:!1,get:function(){return this.selected.filter((function(t){return t.selected}))}}},methods:{select:function(t,e){console.log(t,e);var n=this.selected.find((function(e){return e.display==t}));n.selected==e.key?this.$store.dispatch("getData",{identifier:this.line.identifier,col:t,query:{filter:e.filter,key:void 0}}):this.$store.dispatch("getData",{identifier:this.line.identifier,col:t,query:e}),this.$forceUpdate()},removeLine:function(t){this.$store.commit("removeLine",t)},collapse:function(t){this.collapsed=!t},addFilter:function(t,e){this.$store.commit("addFilter",e),this.select(t.display,e)},log:function(t){console.log(t)}},mounted:function(){},props:{line:Object}},f=d,h=(n("af75"),n("d0b7"),n("2877")),m=Object(h["a"])(f,o,l,!1,null,"bde6c02e",null),p=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"metric"},[t.metrics.length<5?[n("ul",t._l(t.metrics,(function(e){return n("li",{key:e.key},[n("span",{class:{active:e.key==t.active},on:{click:function(n){return t.select(e)}}},[t._v(t._s(e.display))])])})),0)]:[n("select",{staticClass:"custom-select",on:{change:t.filterBullshitFromSelect}},[n("option",{attrs:{disabled:""}},[t._v("Choose Metric")]),t._l(t.metrics,(function(e){return n("option",{key:e.key,domProps:{value:e.key}},[t._v(t._s(e.display))])}))],2)]],2)},y=[],g={props:{},data:function(){return{selected:void 0}},computed:{metrics:function(){return this.$store.state.metrics},active:{get:function(){return this.selected},set:function(){return this.selected}}},watch:{metrics:function(){this.active=this.metrics[0].key}},created:function(){},mounted:function(){},methods:{select:function(t){t.key!=this.selected&&(this.$store.commit("setActiveMetric",t),this.selected=t.key,this.$store.dispatch("getData",{identifier:!1,filter:"metric",query:t}))},filterBullshitFromSelect:function(t){var e=t.target.value,n=this.metrics.find((function(t){return t.key==e}));this.select(n)}}},b=g,x=(n("05ab"),Object(h["a"])(b,v,y,!1,null,"94936b7a",null)),w=x.exports,k={props:{company:String},computed:{lines:{cache:!1,get:function(){return this.$store.state.lines}},hasMetrics:{cache:!1,get:function(){return this.$store.state.metrics.length>0}}},watch:{hasMetrics:function(t){t&&this.initializeFromURL(this.$route.query)}},mounted:function(){},methods:{initializeFromURL:function(t){if(t.lines)while(t.lines>0)this.$store.dispatch("addLine"),t.lines--;else this.$store.dispatch("addLine");var e;e=t.metric?this.$store.state.metrics.find((function(e){return e.key==t.metric}))?this.$store.state.metrics.find((function(e){return e.key==t.metric})):e=this.$store.state.metrics[0]:this.$store.state.metrics[0],this.$refs.metrics.select(e)},setFiltersFromURL:function(t){var e=this,n=[];this.$store.state.filterColumns.forEach((function(e){e.db_columns.forEach((function(i){t[i]&&t[i].split(",").forEach((function(t,s){n[s]={display:e.display,element:{filter:i,key:t}}}))}))})),this.$store.getters.getLines.forEach((function(t,i){if(e.$refs["filterRow-"+t.identifier]){var s=n[i];console.log(s),e.$refs["filterRow-"+t.identifier][0].select(s.display,s.element,"initialize")}}))},addLine:function(){var t=void 0==this.lines[this.lines.length-1]?{}:this.lines[this.lines.length-1].query;this.$store.dispatch("addLine",t)}},components:{filterRow:p,metrics:w},data:function(){return{}},created:function(){}},_=k,C=(n("0634"),Object(h["a"])(_,a,c,!1,null,"f7e434d8",null)),$=C.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"vis",staticClass:"col-8"},[t.dataState?n("svg",{staticClass:"lines",attrs:{width:t.style.width,height:t.style.height+t.style.margin.top+t.style.margin.bottom}},[n("defs",[n("clipPath",{attrs:{id:"mask"}},[n("rect",{attrs:{x:t.style.margin.left,y:"0",width:t.style.width,height:t.style.height-t.style.margin.top-t.style.margin.bottom}})])]),n("g",{staticClass:"axes",attrs:{transform:"translate(0,"+t.style.margin.top+")"}},[n("text",{attrs:{"font-size":"6pt",y:"-10",x:t.style.margin.left+10,"text-anchor":"middle"}},[t._v(t._s(t.activeMetric.display))]),n("g",{directives:[{name:"axis",rawName:"v-axis:x",value:t.scales,expression:"scales",arg:"x"}],staticClass:"xAxes",attrs:{transform:"translate(0,"+(t.style.height-t.style.margin.top-t.style.margin.bottom)+")"}}),n("g",{directives:[{name:"axis",rawName:"v-axis:y",value:t.scales,expression:"scales",arg:"y"}],staticClass:"yAxes",attrs:{transform:"translate("+t.style.margin.left+",0)"}})]),t.showEvents?n("g",{staticClass:"events",attrs:{"clip-path":"url(#mask)",transform:"translate(0,"+t.style.margin.top+")"}},t._l(t.events,(function(e,i){return n("g",{key:"event-"+i,class:"event-"+i,attrs:{transform:"translate("+e.x+",0)"}},[n("line",{attrs:{x0:"0",y0:t.style.margin.top,x1:"0",y1:t.style.height-t.style.margin.bottom-t.style.margin.top,stroke:"lightgrey","stroke-width":"2",fill:"lightgrey"},on:{mouseover:function(n){return t.showText(!0,e,i)},mouseout:function(e){return t.showText(!1,{date:"",text:""},i)}}})])})),0):t._e(),n("g",{attrs:{"clip-path":"url(#mask)",transform:"translate(0,"+t.style.margin.top+")"}},t._l(t.lines,(function(e){return n("g",{key:e.identifier,staticClass:"lines"},[e.path?n("path",{attrs:{d:e.path,fill:e.color,stroke:"none"}}):t._e()])})),0),n("g",{staticClass:"legend",attrs:{transform:"translate("+(t.style.width-t.style.margin.right-50)+","+(t.style.height-t.style.margin.bottom-50)+")"}},[n("g",[n("text",{attrs:{"text-anchor":"end"}},[t._v("less confident")]),n("line",{attrs:{x0:"0",x1:"20",y0:"0",y1:"0",transform:"translate(2,-3)",stroke:"black","stroke-width":"2"}})]),n("g",{attrs:{transform:"translate(0,10)"}},[n("text",{attrs:{"text-anchor":"end"}},[t._v("more confident")]),n("line",{attrs:{x0:"0",x1:"20",y0:"0",y1:"0",transform:"translate(2,-3)",stroke:"black","stroke-width":"5"}})])])]):t._e(),n("svg",{staticStyle:{"background-color":"lightgrey"},attrs:{width:t.style.width,height:"50"}},[t.dataState?n("g",t._l(t.lines,(function(e){return n("g",{key:e.identifier,staticClass:"lines"},[e.micro?n("path",{attrs:{d:e.micro,stroke:e.color,"stroke-opacity":"0.5",fill:"none"}}):t._e()])})),0):t._e(),n("g",{staticClass:"brush"})]),n("form",[n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.showEvents,expression:"showEvents"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.showEvents)?t._i(t.showEvents,null)>-1:t.showEvents},on:{click:function(e){t.showEvents=!t.showEvents},change:function(e){var n=t.showEvents,i=e.target,s=!!i.checked;if(Array.isArray(n)){var r=null,a=t._i(n,r);i.checked?a<0&&(t.showEvents=n.concat([r])):a>-1&&(t.showEvents=n.slice(0,a).concat(n.slice(a+1)))}else t.showEvents=s}}}),n("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v("Events:")])])]),n("div",{staticClass:"currentEvent"},[n("span",[t._v(t._s(t.currentEvent.date))]),n("p",[t._v(t._s(t.currentEvent.text))])])])},L=[],F=(n("a623"),n("d3b7"),n("ddb0"),n("5698")),A={data:function(){return{showEvents:!0,currentEvent:{},xDomain:[],style:{width:1e3,height:300,margin:{top:30,right:25,bottom:0,left:40}}}},computed:{events:{cache:!0,get:function(){var t=this,e=F["timeParse"]("%d-%m-%Y"),n=this.$store.state.events.map((function(n){return n.x=t.scales.x(e(n.date)),n}));return n}},activeMetric:function(){return this.$store.getters.getActiveMetric},data:{cache:!1,get:function(){return this.$store.getters.getLines.map((function(t){return t.touched=0,t}))}},dataState:function(){var t=!1,e=this.data.map((function(t){return!!t.values}));return e.length>0&&e.every((function(t){return t}))&&(t=!0),t},scales:{cache:!0,get:function(){var t=F["timeParse"]("%Y-%m"),e=this.style,n=F["scaleTime"]().range([e.margin.left,e.width-e.margin.left-e.margin.right]),i=F["scaleLinear"]().range([e.height-e.margin.top-e.margin.bottom,e.margin.bottom]),s=F["scaleLinear"]().range([3,10]),r=F["scaleLinear"]().range([e.margin.left,e.width-e.margin.left-e.margin.right]),a=F["scaleLinear"]().range([45,5]);if(F["axisLeft"]().scale(n),F["axisBottom"]().scale(i),this.dataState){var c=[];this.data.forEach((function(t){t.values.forEach((function(t){c.push(t)}))}));var o=this.xDomain.length>0?this.xDomain:F["extent"](c,(function(e){return t(e.d)}));n.domain(o),r.domain(F["extent"](c,(function(e){return t(e.d)}))),i.domain(F["extent"](c,(function(t){return+t.r}))).nice(),a.domain(F["extent"](c,(function(t){return+t.r}))),s.domain(F["extent"](c,(function(t){return+t.c})))}return{x:n,y:i,microX:r,microY:a,confidence:s}}},lines:{cache:!1,get:function(){var t=this,e=F["timeParse"]("%Y-%m"),n=F["area"]().curve(F["curveBasis"]).x((function(n){return t.scales.x(e(n.d))})).y0((function(e){return t.scales.y(e.r)-t.scales.confidence(e.c)})).y1((function(e){return t.scales.y(e.r)+t.scales.confidence(e.c)})),i=F["line"]().curve(F["curveBasis"]).x((function(n){return t.scales.microX(e(n.d))})).y((function(e){return t.scales.microY(e.r)}));return this.data.map((function(t){return t.values&&(t.path=n(t.values),t.micro=i(t.values)),t}))}}},directives:{axis:function(t,e){var n=e.arg,i={x:"axisBottom",y:"axisLeft"}[n],s=e.value[n];F["select"](t).transition().call(F[i](s).ticks(5))}},watch:{dataState:function(t){t&&this.brush()}},mounted:function(){this.getWidth(),this.$nextTick((function(){window.addEventListener("resize",this.getWidth)}))},methods:{brush:function(){var t=F["brushX"]().extent(this.scales.microX.range().map((function(t,e){return[t,50*e]}))).on("end",this.updateX);F["select"]("g.brush").call(t).call(t.move,this.scales.x.range())},updateX:function(){var t=this,e=F["event"].selection.map((function(e){return t.scales.microX.invert(e)}));e.forEach((function(e,n){t.$set(t.xDomain,n,e)})),F["select"](".xAxes").transition().call(F["axisBottom"](this.scales.x))},getWidth:function(){this.$refs.vis&&(this.style.width=this.$refs.vis.clientWidth,this.dataState&&this.brush())},showText:function(t,e,n){this.currentEvent=e,t?F["select"](".event-"+n+" line").transition().attr("stroke-width",8).attr("x",-4):F["selectAll"](".events line").transition().attr("stroke-width",2).attr("x",0)}}},T=A,M=(n("1d94"),Object(h["a"])(T,E,L,!1,null,"0db19839",null)),j=M.exports,O={name:"App",components:{sidebar:$,vis:j},beforeCreate:function(){this.$store.commit("setTable",this.$route.query.table),this.$store.dispatch("getMetricsAndFilters"),this.$store.dispatch("getEvents")},methods:{}},P=O,S=(n("034f"),Object(h["a"])(P,s,r,!1,null,null,null)),q=S.exports,B=n("bc3a"),I=n.n(B),z=n("a7fe"),D=n.n(z),U=(n("99af"),n("c740"),n("caad"),n("fb6a"),n("a434"),n("2532"),n("2ca0"),n("2f62")),R=n("cc98"),X=n.n(R);i["a"].use(U["a"]);var W="https://social-dynamics.net/nokiatwin/api.php",N=new U["a"].Store({state:{error:"",table:"",lines:[],metrics:[],activeMetric:"",filterColumns:[],colors:[{hex:"#20C5A0",used:!1},{hex:"#BD10E0",used:!1},{hex:"#F5A623",used:!1},{hex:"#4A90E2",used:!1},{hex:"#ACC000",used:!1}],addedFilters:[],events:[]},getters:{getFilterColumns:function(t){return t.filterColumns.map((function(e){var n=e.elements.slice(0,5),i=t.addedFilters.filter((function(t){return e.db_columns.includes(t.filter)}));return n=n.concat(i),{display:e.display,filters:e.db_columns,elements:n,autocomplete:e.elements.filter((function(t){return null!=t.key}))}}))},getLines:function(t){return t.lines},getContext:function(t){return t.context},getActiveMetric:function(t){return t.activeMetric}},mutations:{setTable:function(t,e){e?t.table=e:t.error="No Table."},setActiveMetric:function(t,e){e&&(t.activeMetric=e)},removeLine:function(t,e){i["a"].set(t.colors.find((function(t){return t.used==e})),"used",!1),t.lines.length>1&&t.lines.splice(t.lines.findIndex((function(t){return t.identifier==e})),1)},writeQuery:function(t,e){i["a"].set(t.lines[e.index].query,e.filter,e.key)},writeValues:function(t,e){i["a"].set(t.lines[e.index],"values",e.values)},addFilter:function(t,e){i["a"].set(t.addedFilters,t.addedFilters.length,e)}},actions:{addLine:function(t){var e=t.state,n=t.dispatch,s={query:{}};s.identifier=X.a.time();var r=e.colors.findIndex((function(t){return!t.used}));s.color=e.colors[r].hex,i["a"].set(e.colors[r],"used",s.identifier),i["a"].set(e.lines,e.lines.length,s),n("getData",{identifier:!1,filter:"metric",query:{key:e.metrics[0].key}})},getData:function(t,e){var n=t.dispatch,i=t.commit,s=t.state;e.identifier?(i("writeQuery",{index:s.lines.findIndex((function(t){return t.identifier==e.identifier})),filter:e.query.filter,key:e.query.key}),n("callAPI",e.identifier)):s.lines.forEach((function(t,s){i("writeQuery",{index:s,filter:"metric",key:e.query.key}),n("callAPI",t.identifier)}))},callAPI:function(t,e){var n=t.commit,i=t.state,s=i.lines.find((function(t){return t.identifier==e})).query;s.type="result",s.table=i.table,I.a.post(W,s,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){n("writeValues",{index:i.lines.findIndex((function(t){return t.identifier==e})),values:t.data})})).catch((function(t){console.log(t)}))},debugAPI:function(){var t={type:"debug",metric:"metric_rating_overall",filter_company:"starbucks",filter_country:"United Kingdom",filter_employee_title:"Barista"};I.a.post(W,t,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){console.log(t.data.split("end_output")[0])})).catch((function(t){console.log(t)}))},getMetricsAndFilters:function(t){var e=t.dispatch,n=t.state,s={type:"metrics",table:n.table};I.a.post(W,s,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){var s=t.data.filter((function(t){return t.key.startsWith("metric_")})).map((function(t){return t.display||(t.display=t.key),t}));i["a"].set(n,"metrics",s),e("getFilters",t.data.filter((function(t){return t.key.startsWith("filter_")})))})).catch((function(t){console.log(t)}))},getEvents:function(t){var e=t.state,n={type:"events",table:e.table};I.a.post(W,n,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(t){i["a"].set(e,"events",t.data)})).catch((function(t){console.log(t)}))},getFilters:function(t,e){var n=t.state,s=[];e.forEach((function(t){var e=s.find((function(e){return e.display==t.display}));e?e.db_columns.push(t.key):s.push({display:t.display,db_columns:[t.key]})})),s=s.map((function(t){return t.elements=[],t.db_columns.forEach((function(e){var i={type:"selectors",listSelector:e,table:n.table};I.a.post(W,i,{headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((function(n){n.data.forEach((function(n){var i={key:n[e],filter:e,count:n.count};t.elements.push(i)})),t.elements.sort((function(t,e){return e.count-t.count}))}))})),t})),i["a"].set(n,"filterColumns",s)}}}),Y=n("8c4f");i["a"].use(Y["a"]);var V=new Y["a"]({});n("f9e3"),n("2dd8");i["a"].use(D.a,I.a),i["a"].config.productionTip=!1,new i["a"]({store:N,router:V,render:function(t){return t(q)}}).$mount("#app")},"85ec":function(t,e,n){},af75:function(t,e,n){"use strict";var i=n("b64f"),s=n.n(i);s.a},b566:function(t,e,n){},b64f:function(t,e,n){},bd08:function(t,e,n){},d0b7:function(t,e,n){"use strict";var i=n("2c95"),s=n.n(i);s.a},e1a6:function(t,e,n){}});
//# sourceMappingURL=app.889df7c6.js.map