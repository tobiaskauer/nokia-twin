<!DOCTYPE html>
<html>
<head>
  <script src="https://d3js.org/d3.v5.min.js"></script>
</head>


<body>

</body>

<script>
  'use strict'

  Promise.all([
    d3.tsv('assets/country_regions_new.tsv'),
    d3.dsv(";","../import/example_data_large.csv")
]).then(function(files) {
    let dictionary = files[0]
    let reviews = files[1]

    reviews.forEach((review,i) => {
      if(true) {
        if(review.filter_city) {
          let target =  dictionary.find(x => x.location == review.filter_city)
          if(target) {
            let country = target.country
            console.log(i%2+"\t"+country)
          } else {
            console.log(i%2+"\t"+"")
          }
        } else {
          console.log(i%2+"\t"+"")
        }
      }
    })
  })
  </script>
</html>






