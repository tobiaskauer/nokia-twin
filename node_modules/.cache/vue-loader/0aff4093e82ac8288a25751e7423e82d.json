{"remainingRequest":"/Users/tk/GitHub/nokia-twin/twin-dashboard/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tk/GitHub/nokia-twin/twin-dashboard/src/components/chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tk/GitHub/nokia-twin/twin-dashboard/src/components/chart.vue","mtime":1593245108679},{"path":"/Users/tk/GitHub/nokia-twin/twin-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/nokia-twin/twin-dashboard/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tk/GitHub/nokia-twin/twin-dashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tk/GitHub/nokia-twin/twin-dashboard/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjaGFydCcsCgogIHByb3BzOiB7CiAgICBkYXRhOiBBcnJheQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2xvcnM6IFsiIzUwRTNDMiIsIiNCRDEwRTAiXQogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBzY2FsZXM6IHsKICAgICAgY2FjaGU6IHRydWUsCiAgICAgIGdldCgpIHsKICAgICAgICBsZXQgcGFyc2VUaW1lID0gZDMudGltZVBhcnNlKCIlWS0lbSIpOwogICAgICAgIGxldCBzdHlsZSA9IHRoaXMuc3R5bGUKCiAgICAgICAgY29uc3QgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFsKICAgICAgICAgIHN0eWxlLm1hcmdpbi5sZWZ0LAogICAgICAgICAgc3R5bGUud2lkdGggLSBzdHlsZS5tYXJnaW4ubGVmdCAtIHN0eWxlLm1hcmdpbi5yaWdodAogICAgICAgIF0pOwogICAgICAgIGNvbnN0IHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFsKICAgICAgICAgIHN0eWxlLmhlaWdodCAtIHN0eWxlLm1hcmdpbi50b3AgLSBzdHlsZS5tYXJnaW4uYm90dG9tLAogICAgICAgICAgc3R5bGUubWFyZ2luLmJvdHRvbQogICAgICAgIF0pOwoKICAgICAgICBkMy5heGlzTGVmdCgpLnNjYWxlKHgpOwogICAgICAgIGQzLmF4aXNCb3R0b20oKS5zY2FsZSh5KTsKCiAgICAgICAgeC5kb21haW4oW3BhcnNlVGltZSgiMjAwOC0wMSIpLHBhcnNlVGltZSgiMjAyMC0xMiIpXSk7IC8vVE9ETzogYXNzaWduIGR5bmFtaWNhbGx5CiAgICAgICAgeS5kb21haW4oWzAsNV0pOwoKICAgICAgIC8qaWYodGhpcy5kYXRhKSB7CiAgICAgICAgIGxldCBtaW5NYXggPSB7ZGF0ZXM6IFtdLCByYXRpbmdzOiBbXX0KICAgICAgICAgdGhpcy5kYXRhLmZvckVhY2gocmVzdWx0PT4gewogICAgICAgICAgIGQzLmV4dGVudChyZXN1bHQuZGF0YSx4PT5wYXJzZVRpbWUoeC5kKSkuZm9yRWFjaChkYXRlID0+IG1pbk1heC5kYXRlcy5wdXNoKGRhdGUpKQogICAgICAgICAgIGQzLmV4dGVudChyZXN1bHQuZGF0YSx4PT4reC5yKS5mb3JFYWNoKHJhdGluZyA9PiBtaW5NYXgucmF0aW5ncy5wdXNoKHJhdGluZykpCiAgICAgICAgIH0pCiAgICAgICAgICB4LmRvbWFpbihkMy5leHRlbnQobWluTWF4LmRhdGVzKSk7IC8vVE9ETzogYXNzaWduIGR5bmFtaWNhbGx5CiAgICAgICAgICB5LmRvbWFpbihkMy5leHRlbnQobWluTWF4LnJhdGluZ3MpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgeC5kb21haW4oW3BhcnNlVGltZSgiMjAwNy0wMSIpLHBhcnNlVGltZSgiMjAyMC0xMiIpXSk7IC8vVE9ETzogYXNzaWduIGR5bmFtaWNhbGx5CiAgICAgICAgICB5LmRvbWFpbihbMCw1XSk7CiAgICAgICAgfSovCiAgICAgICAgcmV0dXJuIHsgeCwgeSB9OwogICAgICB9CiAgICB9LAoKICAgIGxpbmVzOiB7CiAgICAgIGNhY2hlOiBmYWxzZSwKICAgICAgZ2V0KCkgewogICAgICAgIGlmKHRoaXMuZGF0YSkgewogICAgICAgICAgbGV0IHBhcnNlVGltZSA9IGQzLnRpbWVQYXJzZSgiJVktJW0iKTsKICAgICAgICAgIGNvbnN0IHBhdGggPSBkMy5saW5lKCkKICAgICAgICAgIC5jdXJ2ZShkMy5jdXJ2ZUJhc2lzKQogICAgICAgICAgIC54KGQgPT4gdGhpcy5zY2FsZXMueChwYXJzZVRpbWUoZC5kKSkpCiAgICAgICAgICAgLnkoZCA9PiB0aGlzLnNjYWxlcy55KGQucikpOwoKICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1hcCh2YWx1ZXMgPT4gcGF0aCh2YWx1ZXMuZGF0YSkpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsCiAgICAgICAgfQoKICAgICAgfQogICAgfSwKCiAgICBzdHlsZTogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IDEwMDAsIC8vVE9ETzogc2V0IHRvIHdpbmRvdyB3aWR0aAogICAgICAgIGhlaWdodDogMzAwLAogICAgICAgIG1hcmdpbjogewogICAgICAgICAgdG9wOiAyNSwKICAgICAgICAgIHJpZ2h0OiAyNSwKICAgICAgICAgIGJvdHRvbTogMjUsCiAgICAgICAgICBsZWZ0OiAyNQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIGNyZWF0ZWQgKCkgewoKICB9LAoKICBtb3VudGVkICgpIHsKICAgIGxldCBnID0gZDMuc2VsZWN0KCJnLmxpbmVzIikKICAgIGxldCBzdHlsZSA9IHRoaXMuc3R5bGUKICAgIC8vZy5hdHRyKCJ0cmFuc2Zvcm0iLCJ0cmFuc2xhdGUoIitzdHlsZS5tYXJnaW4ubGVmdCsiLCIrc3R5bGUubWFyZ2luLnRvcCsiKSIpCiAgICAvL2cuYXR0cigidHJhbnNmb3JtIiwidHJhbnNsYXRlKDI1LDI1KSIpCiAgICBnLmFwcGVuZCgiZyIpLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIitzdHlsZS5tYXJnaW4ubGVmdCsiLDApIikuY2FsbChkMy5heGlzTGVmdCh0aGlzLnNjYWxlcy55KS50aWNrcyg1KSkKICAgIGcuYXBwZW5kKCJnIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIrKHN0eWxlLmhlaWdodC1zdHlsZS5tYXJnaW4udG9wLXN0eWxlLm1hcmdpbi5ib3R0b20pKyIpIikuY2FsbChkMy5heGlzQm90dG9tKHRoaXMuc2NhbGVzLngpLnRpY2tzKDUpKQoKICAvKiAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpCiAgICB9KSovCiAgfSwKCiAgbWV0aG9kczogewogIH0KfQo="},{"version":3,"sources":["chart.vue"],"names":[],"mappings":";;;;;;;;;AASA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"chart.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <svg :width=\"style.width\" :height=\"style.height\" class=\"lines\">\n      <g class=\"lines\">\n        <path v-for=\"(line,index) in lines\" v-bind:key=\"index\" :d=\"line\" fill=\"none\" :stroke=\"colors[index]\"/>\n      </g>\n    </svg>\n</template>\n\n<script>\nimport * as d3 from 'd3'\n\nexport default {\n  name: 'chart',\n\n  props: {\n    data: Array\n  },\n\n  data() {\n    return {\n      colors: [\"#50E3C2\",\"#BD10E0\"]\n    }\n  },\n\n  computed: {\n    scales: {\n      cache: true,\n      get() {\n        let parseTime = d3.timeParse(\"%Y-%m\");\n        let style = this.style\n\n        const x = d3.scaleTime().range([\n          style.margin.left,\n          style.width - style.margin.left - style.margin.right\n        ]);\n        const y = d3.scaleLinear().range([\n          style.height - style.margin.top - style.margin.bottom,\n          style.margin.bottom\n        ]);\n\n        d3.axisLeft().scale(x);\n        d3.axisBottom().scale(y);\n\n        x.domain([parseTime(\"2008-01\"),parseTime(\"2020-12\")]); //TODO: assign dynamically\n        y.domain([0,5]);\n\n       /*if(this.data) {\n         let minMax = {dates: [], ratings: []}\n         this.data.forEach(result=> {\n           d3.extent(result.data,x=>parseTime(x.d)).forEach(date => minMax.dates.push(date))\n           d3.extent(result.data,x=>+x.r).forEach(rating => minMax.ratings.push(rating))\n         })\n          x.domain(d3.extent(minMax.dates)); //TODO: assign dynamically\n          y.domain(d3.extent(minMax.ratings));\n        } else {\n          x.domain([parseTime(\"2007-01\"),parseTime(\"2020-12\")]); //TODO: assign dynamically\n          y.domain([0,5]);\n        }*/\n        return { x, y };\n      }\n    },\n\n    lines: {\n      cache: false,\n      get() {\n        if(this.data) {\n          let parseTime = d3.timeParse(\"%Y-%m\");\n          const path = d3.line()\n          .curve(d3.curveBasis)\n           .x(d => this.scales.x(parseTime(d.d)))\n           .y(d => this.scales.y(d.r));\n\n           return this.data.map(values => path(values.data))\n        } else {\n          return null\n        }\n\n      }\n    },\n\n    style: function() {\n      return {\n        width: 1000, //TODO: set to window width\n        height: 300,\n        margin: {\n          top: 25,\n          right: 25,\n          bottom: 25,\n          left: 25\n        }\n      }\n    }\n  },\n\n  created () {\n\n  },\n\n  mounted () {\n    let g = d3.select(\"g.lines\")\n    let style = this.style\n    //g.attr(\"transform\",\"translate(\"+style.margin.left+\",\"+style.margin.top+\")\")\n    //g.attr(\"transform\",\"translate(25,25)\")\n    g.append(\"g\").attr(\"transform\", \"translate(\"+style.margin.left+\",0)\").call(d3.axisLeft(this.scales.y).ticks(5))\n    g.append(\"g\").attr(\"transform\", \"translate(0,\"+(style.height-style.margin.top-style.margin.bottom)+\")\").call(d3.axisBottom(this.scales.x).ticks(5))\n\n  /*  this.$nextTick(function () {\n      console.log(this.data)\n    })*/\n  },\n\n  methods: {\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nsvg {\n  background-color: white;\n}\npath {\n  transition: d 0.3s\n}\n</style>\n"]}]}